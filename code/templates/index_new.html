<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Churn Prediction 🌟</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-color: #343a40; /* Dark background */
            color: #ffffff; /* Light text */
            font-family: Arial, sans-serif; /* Clean font */
        }
        .container {
            max-width: 1200px; /* Limit width for aesthetics */
            margin-top: 20px; /* Space from top */
        }
        .form-group {
            margin-bottom: 10px; /* Space between form groups */
        }
        #loading {
            color: #ffc107; /* Loading text color */
        }
        #result {
            margin-top: 20px; /* Space above result */
        }
    </style>
</head>
<body>
    <div class="container text-center">
        <h2>Customer Churn Prediction 🧑‍💻</h2>
        <form id="predictionForm" class="mb-4">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="seniorcitizen">Senior Citizen:</label>
                        <select class="form-control" name="seniorcitizen" required>
                            <option value="0">No 👶</option>
                            <option value="1">Yes 👴</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="partner">Partner:</label>
                        <select class="form-control" name="partner" required>
                            <option value="Yes">Yes 👩‍❤️‍👨</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="dependents">Dependents:</label>
                        <select class="form-control" name="dependents" required>
                            <option value="Yes">Yes 👶</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="tenure">Tenure (Months):</label>
                        <input type="number" class="form-control" name="tenure" min="0" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="multiplelines">Multiple Lines:</label>
                        <select class="form-control" name="multiplelines" required>
                            <option value="Yes">Yes 📞</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="internetservice">Internet Service:</label>
                        <select class="form-control" name="internetservice" required>
                            <option value="DSL">DSL 🌐</option>
                            <option value="Fiber optic">Fiber optic ⚡</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="onlinesecurity">Online Security:</label>
                        <select class="form-control" name="onlinesecurity" required>
                            <option value="Yes">Yes 🔒</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="onlinebackup">Online Backup:</label>
                        <select class="form-control" name="onlinebackup" required>
                            <option value="Yes">Yes ☁️</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="deviceprotection">Device Protection:</label>
                        <select class="form-control" name="deviceprotection" required>
                            <option value="Yes">Yes 🛡️</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="techsupport">Tech Support:</label>
                        <select class="form-control" name="techsupport" required>
                            <option value="Yes">Yes 🛠️</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="streamingtv">Streaming TV:</label>
                        <select class="form-control" name="streamingtv" required>
                            <option value="Yes">Yes 📺</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="streamingmovies">Streaming Movies:</label>
                        <select class="form-control" name="streamingmovies" required>
                            <option value="Yes">Yes 🎬</option>
                            <option value="No">No ❌</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="contract">Contract:</label>
                        <select class="form-control" name="contract" required>
                            <option value="Month-to-month">Month-to-month 📅</option>
                            <option value="One year">One year 📆</option>
                            <option value="Two year">Two year 📆📆</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="paperlessbilling">Paperless Billing:</label>
                        <select class="form-control" name="paperlessbilling" required>
                            <option value="Yes">Yes 📄❌</option>
                            <option value="No">No 📄</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="paymentmethod">Payment Method:</label>
                        <select class="form-control" name="paymentmethod" required>
                            <option value="Electronic check">Electronic check 💳</option>
                            <option value="Mailed check">Mailed check 📬</option>
                            <option value="Bank transfer (automatic)">Bank transfer (automatic) 🏦</option>
                            <option value="Credit card (automatic)">Credit card (automatic) 💳</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="monthlycharges">Monthly Charges:</label>
                        <input type="number" step="0.01" class="form-control" name="monthlycharges" min="0" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="totalcharges">Total Charges:</label>
                        <input type="number" step="0.01" class="form-control" name="totalcharges" min="0" required>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Predict Churn 🚀</button>
        </form>
        <div id="loading" class="text-center" style="display:none;">Loading... ⏳</div>
        <div id="result" class="mt-4"></div>
    </div>

    <script>
        $(document).ready(function() {
            $('#predictionForm').on('submit', function(event) {
                event.preventDefault(); // Prevent default form submission
                $('#loading').show(); // Show loading spinner
                const formData = $(this).serialize(); // Serialize form data

                $.ajax({
                    type: 'POST',
                    url: '/',
                    data: formData,
                    success: function(response) {
                        console.log("Response from server:", response); // Log the response
                        $('#loading').hide(); // Hide loading spinner
                        if (response.error) {
                            $('#result').html(`Error: ${response.error}`); // Display error if any
                        } else {
                            $('#result').html(`Prediction: ${response.prediction}, Probability: ${response.probability}`);
                        }
                    },
                    error: function() {
                        $('#loading').hide(); // Hide loading spinner
                        $('#result').html('Error processing your request. ❌');
                    }
                });
            });
        });
    </script>
</body>
</html>